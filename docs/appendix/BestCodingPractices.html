

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Best Coding Practices(C/C++) &mdash; Coding Art</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Coding Art" href="../index.html"/>
        <link rel="up" title="Appendix" href="index.html"/>
        <link rel="next" title="Emoji and Markdown" href="EmojiMarkdown.html"/>
        <link rel="prev" title="Best Naming Practices" href="BestNamingPractices.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> CodingArt
          

          
          </a>

          
            
            
              <div class="version">
                0.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../c/index.html">C</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp/index.html">C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lua/index.html">Lua</a></li>
<li class="toctree-l1"><a class="reference internal" href="../xml/index.html">XML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../json/index.html">JSON</a></li>
<li class="toctree-l1"><a class="reference internal" href="../shell/index.html">Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/index.html">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../git/index.html">Git Style</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Appendix</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ChangeLog.html">Change Log</a></li>
<li class="toctree-l2"><a class="reference internal" href="BestNamingPractices.html">Best Naming Practices</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Best Coding Practices(C/C++)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#usage-of-layering">Usage of Layering</a></li>
<li class="toctree-l3"><a class="reference internal" href="#coding-tips">Coding Tips</a></li>
<li class="toctree-l3"><a class="reference internal" href="#expressions">Expressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#integers">Integers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#floating-point">Floating Point</a></li>
<li class="toctree-l3"><a class="reference internal" href="#characters-and-strings">Characters and Strings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#memory-management">Memory Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="#application-programming-interfaces">Application Programming Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="EmojiMarkdown.html">Emoji and Markdown</a></li>
<li class="toctree-l2"><a class="reference internal" href="FunnyShit.html">Funny Shit</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">CodingArt</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Appendix</a> &raquo;</li>
      
    <li>Best Coding Practices(C/C++)</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="best-coding-practices-c-c">
<span id="appendix-best-coding-practices"></span><h1>Best Coding Practices(C/C++)</h1>
<div class="section" id="usage-of-layering">
<span id="appendix-usage-of-layering"></span><h2>Usage of Layering</h2>
<p>Layering is the primary technique for reducing complexity in a system. A system should be divided
into layers. Layers should communicate between adjacent layers using well defined interfaces. When
a layer uses a non-adjacent layer then a layering violation has occurred.</p>
<p>A layering violation simply means we have dependency between layers that is not controlled by a well
defined interface. When one of the layers changes code could break. We don&#8217;t want code to break so
we want layers to work only with other adjacent layers.</p>
<p>Sometimes we need to jump layers for performance reasons. This is fine, but we should know what we
are doing and document it appropriately.</p>
</div>
<div class="section" id="coding-tips">
<span id="appendix-coding-tips"></span><h2>Coding Tips</h2>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">// this is better</span>
<span class="k">if</span><span class="p">(</span><span class="n">f</span><span class="p">())</span>
<span class="p">{</span>
    <span class="n">do_some_thing</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// this is not good</span>
<span class="k">if</span><span class="p">(</span><span class="n">FAIL</span> <span class="o">!=</span> <span class="n">f</span><span class="p">())</span>
<span class="p">{</span>
    <span class="n">do_other_thing</span><span class="p">();</span>
    <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li>Usually Avoid Embedded Assignments</li>
</ul>
<div class="highlight-c"><div class="highlight"><pre><span class="n">d</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="n">b</span> <span class="o">+</span> <span class="n">c</span><span class="p">)</span> <span class="o">+</span> <span class="n">r</span><span class="p">;</span> <span class="c1">// do you realy need to do it like this?</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">b</span> <span class="o">+</span> <span class="n">c</span><span class="p">;</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">r</span><span class="p">;</span>           <span class="c1">// This will be good and clear enough</span>

<span class="c1">// there is no other way, and this is good enough</span>
<span class="k">while</span><span class="p">(</span><span class="n">EOF</span> <span class="o">!=</span> <span class="p">(</span><span class="n">c</span> <span class="o">=</span> <span class="n">getchar</span><span class="p">()))</span>
<span class="p">{</span>
    <span class="n">do_some_thing</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="expressions">
<span id="appendix-expressions"></span><h2>Expressions</h2>
<ul class="simple">
<li>Do not depend on the order of evaluation for side effects</li>
<li>Use parentheses for precedence of operation</li>
<li>Do not depend on the order of evaluation of subexpressions</li>
<li>Do not depend on the order in which side effects take place</li>
<li>Do not read uninitialized memory</li>
<li>Do not dereference <strong>null</strong> pointers</li>
<li>Do not access a variable through a pointer of an incompatible type</li>
<li>Do not modify constant objects</li>
<li>Do not compare padding data</li>
<li>Do not ignore values returned by functions</li>
<li>Do not assume the size of a structure is the sum of the sizes of its members</li>
<li>Ensure pointer arithmetic is used correctly</li>
<li>Use <code class="docutils literal"><span class="pre">sizeof</span></code> to determine the size of a type or variable</li>
<li>Do not make assumptions regarding the layout of structures with bit-fields</li>
<li>Use braces for the body of an <code class="docutils literal"><span class="pre">if</span></code>, <code class="docutils literal"><span class="pre">for</span></code>, or <code class="docutils literal"><span class="pre">while</span></code> statement</li>
<li>Perform explicit tests to determine <strong>success</strong>, <strong>true</strong> and <strong>false</strong>, and <strong>equality</strong></li>
<li>Beware of integer promotion when performing bitwise operations on smaller integer types</li>
</ul>
</div>
<div class="section" id="integers">
<span id="appendix-integers"></span><h2>Integers</h2>
<ul class="simple">
<li>Ensure that unsigned integer operations do not wrap</li>
<li>Ensure that integer conversions do not result in lost or misinterpreted data</li>
<li>Ensure that operations on signed integers do not result in overflow</li>
<li>Ensure that division and remainder operations do not result in divide-by-zero errors</li>
<li>Use correct integer precisions</li>
<li>Use bitwise operators only on unsigned operands</li>
<li>Avoid performing bitwise and arithmetic operations on the same data</li>
<li>Evaluate integer expressions in a larger size before comparing or assigning to that size</li>
<li>Converting a pointer to integer or integer to pointer</li>
<li>Do not shift an expression by a negative number or a greater number of bits</li>
</ul>
</div>
<div class="section" id="floating-point">
<span id="appendix-floating-point"></span><h2>Floating Point</h2>
<ul class="simple">
<li>Do not use floating-point variables as loop counters</li>
<li>Ensure that floating-point conversions are within range of the new type</li>
</ul>
</div>
<div class="section" id="characters-and-strings">
<span id="appendix-characters-and-strings"></span><h2>Characters and Strings</h2>
<ul class="simple">
<li>Do not attempt to modify string literals</li>
<li>Guarantee that storage for strings has sufficient space for character data and the <strong>null</strong> terminator</li>
<li>Do not pass a non-null-terminated character sequence to a library function that expects a string</li>
<li>Cast characters to <code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">char</span></code> before converting to larger integer sizes</li>
<li>Arguments to character-handling functions must be representable as an <code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">char</span></code></li>
<li>Do not confuse narrow and wide character strings and functions</li>
<li>Use pointers to <code class="docutils literal"><span class="pre">const</span></code> when referring to string literals</li>
</ul>
</div>
<div class="section" id="memory-management">
<span id="appendix-memorym-anagement"></span><h2>Memory Management</h2>
<ul class="simple">
<li>Do not access freed memory</li>
<li>Free dynamically allocated memory when no longer needed</li>
<li>Allocate and copy structures containing a flexible array member dynamically</li>
<li>Only free memory allocated dynamically</li>
<li>Allocate sufficient memory for an object</li>
<li>Allocate and free memory in the same module, at the same level of abstraction</li>
<li>Store a new value(e.g. <code class="docutils literal"><span class="pre">NULL</span></code>) in pointers immediately after <code class="docutils literal"><span class="pre">free()</span></code></li>
<li>Immediately cast the result of a memory allocation function call</li>
<li>Beware of zero-length allocations</li>
<li>Avoid large stack allocations</li>
<li>Define and use a pointer validation function</li>
</ul>
</div>
<div class="section" id="application-programming-interfaces">
<span id="appendix-application-programming-interfaces"></span><h2>Application Programming Interfaces</h2>
<ul class="simple">
<li>Functions should validate their parameters</li>
<li>Avoid laying out strings in memory directly before sensitive data</li>
<li>Functions that read or write an array should take an argument to specify target size</li>
</ul>
</div>
<div class="section" id="miscellaneous">
<span id="appendix-miscellaneous"></span><h2>Miscellaneous</h2>
<ul class="simple">
<li>No <strong>magic</strong> numbers, use <code class="docutils literal"><span class="pre">enum</span></code>, <code class="docutils literal"><span class="pre">const</span></code> or macros.</li>
<li>Notice the difference of <code class="docutils literal"><span class="pre">#if</span> <span class="pre">XX</span></code>, <code class="docutils literal"><span class="pre">#ifdef</span> <span class="pre">XX</span></code> and <code class="docutils literal"><span class="pre">#if</span> <span class="pre">defined(XX)</span></code>.</li>
<li>The easiest way commenting out large code blocks is using <code class="docutils literal"><span class="pre">#if</span> <span class="pre">0</span></code>.</li>
<li>Do not use floating-point variables where discrete values are needed.</li>
<li>Using a float for a loop counter is a great way to shoot yourself in the foot.</li>
<li>Always test floating-point numbers as <code class="docutils literal"><span class="pre">&lt;=</span></code> or <code class="docutils literal"><span class="pre">&gt;=</span></code>, never use an exact comparison <code class="docutils literal"><span class="pre">==</span></code> or <code class="docutils literal"><span class="pre">!=</span></code>.</li>
<li>Compile cleanly at high warning levels</li>
<li>Use comments consistently and in a readable fashion</li>
<li>Detect and remove dead code</li>
<li>Detect and remove code that has no effect or is never executed</li>
<li>Detect and remove unused values</li>
<li>Do not introduce unnecessary platform dependencies</li>
<li>Use robust loop termination conditions</li>
<li>Ensure that control never reaches the end of a non-void function</li>
<li>Do not use deprecated or obsolescent functions</li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="EmojiMarkdown.html" class="btn btn-neutral float-right" title="Emoji and Markdown" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="BestNamingPractices.html" class="btn btn-neutral" title="Best Naming Practices" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, gkvim.
      Last updated on May 21, 2017.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>